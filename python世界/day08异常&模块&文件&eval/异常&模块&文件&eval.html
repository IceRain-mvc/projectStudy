<!DOCTYPE html>
  <html>
    <head>
      <title>异常&模块&文件&eval</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:///C:\Users\Administrator\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.3.5\node_modules\@shd101wyy\mume\dependencies\katex\katex.min.css">
      
      
      
      
      
      
      
      
      
      

      <style> 
      /**
 * prism.js Github theme based on GitHub's theme.
 * @author Sam Clarke
 */
code[class*="language-"],
pre[class*="language-"] {
  color: #333;
  background: none;
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.4;

  -moz-tab-size: 8;
  -o-tab-size: 8;
  tab-size: 8;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
  padding: .8em;
  overflow: auto;
  /* border: 1px solid #ddd; */
  border-radius: 3px;
  /* background: #fff; */
  background: #f5f5f5;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
  white-space: normal;
  background: #f5f5f5;
}

.token.comment,
.token.blockquote {
  color: #969896;
}

.token.cdata {
  color: #183691;
}

.token.doctype,
.token.punctuation,
.token.variable,
.token.macro.property {
  color: #333;
}

.token.operator,
.token.important,
.token.keyword,
.token.rule,
.token.builtin {
  color: #a71d5d;
}

.token.string,
.token.url,
.token.regex,
.token.attr-value {
  color: #183691;
}

.token.property,
.token.number,
.token.boolean,
.token.entity,
.token.atrule,
.token.constant,
.token.symbol,
.token.command,
.token.code {
  color: #0086b3;
}

.token.tag,
.token.selector,
.token.prolog {
  color: #63a35c;
}

.token.function,
.token.namespace,
.token.pseudo-element,
.token.class,
.token.class-name,
.token.pseudo-class,
.token.id,
.token.url-reference .token.variable,
.token.attr-name {
  color: #795da3;
}

.token.entity {
  cursor: help;
}

.token.title,
.token.title .token.punctuation {
  font-weight: bold;
  color: #1d3e81;
}

.token.list {
  color: #ed6a43;
}

.token.inserted {
  background-color: #eaffea;
  color: #55a532;
}

.token.deleted {
  background-color: #ffecec;
  color: #bd2c00;
}

.token.bold {
  font-weight: bold;
}

.token.italic {
  font-style: italic;
}


/* JSON */
.language-json .token.property {
  color: #183691;
}

.language-markup .token.tag .token.punctuation {
  color: #333;
}

/* CSS */
code.language-css,
.language-css .token.function {
  color: #0086b3;
}

/* YAML */
.language-yaml .token.atrule {
  color: #63a35c;
}

code.language-yaml {
  color: #183691;
}

/* Ruby */
.language-ruby .token.function {
  color: #333;
}

/* Markdown */
.language-markdown .token.url {
  color: #795da3;
}

/* Makefile */
.language-makefile .token.symbol {
  color: #795da3;
}

.language-makefile .token.variable {
  color: #183691;
}

.language-makefile .token.builtin {
  color: #0086b3;
}

/* Bash */
.language-bash .token.keyword {
  color: #0086b3;
}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ul,html body>ol{margin-bottom:16px}html body ul,html body ol{padding-left:2em}html body ul.no-list,html body ol.no-list{padding:0;list-style-type:none}html body ul ul,html body ul ol,html body ol ol,html body ol ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:bold;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:bold}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em !important;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::before,html body code::after{letter-spacing:-0.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;font-size:.85em !important;word-break:normal;white-space:pre;background:transparent;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;font-size:.85em !important;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:before,html body pre tt:before,html body pre code:after,html body pre tt:after{content:normal}html body p,html body blockquote,html body ul,html body ol,html body dl,html body pre{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body pre,html body code{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{padding:0 1.6em;margin-top:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc li{margin-bottom:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{list-style-type:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  150px);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
 
      </style>
    </head>
    <body for="html-export">
      <div class="mume markdown-preview   ">
      <h1 class="mume-header" id="%E5%BC%82%E5%B8%B8">异常</h1>

<h2 class="mume-header" id="%E7%9B%AE%E6%A0%87">目标</h2>

<ul>
<li>异常的概念</li>
<li>捕获异常</li>
<li>异常的传递</li>
<li>抛出异常</li>
</ul>
<h2 class="mume-header" id="01-%E5%BC%82%E5%B8%B8%E7%9A%84%E6%A6%82%E5%BF%B5">01. 异常的概念</h2>

<ul>
<li>程序在运行时，如果 <code>Python 解释器</code> <strong>遇到</strong> 到一个错误，<strong>会停止程序的执行，并且提示一些错误信息</strong>，这就是 <strong>异常</strong></li>
<li><strong>程序停止执行并且提示错误信息</strong> 这个动作，我们通常称之为：<strong>抛出(raise)异常</strong></li>
</ul>
<p><img src="media/14989636063700/001_%E5%BC%82%E5%B8%B8%E7%A4%BA%E6%84%8F%E5%9B%BE.png" alt="001_&#x5F02;&#x5E38;&#x793A;&#x610F;&#x56FE;-w480"></p>
<blockquote>
<p>程序开发时，很难将 <strong>所有的特殊情况</strong> 都处理的面面俱到，通过 <strong>异常捕获</strong> 可以针对突发事件做集中的处理，从而保证程序的 <strong>稳定性和健壮性</strong></p>
</blockquote>
<h2 class="mume-header" id="02-%E6%8D%95%E8%8E%B7%E5%BC%82%E5%B8%B8">02. 捕获异常</h2>

<h3 class="mume-header" id="21-%E7%AE%80%E5%8D%95%E7%9A%84%E6%8D%95%E8%8E%B7%E5%BC%82%E5%B8%B8%E8%AF%AD%E6%B3%95">2.1 简单的捕获异常语法</h3>

<ul>
<li>在程序开发中，如果 <strong>对某些代码的执行不能确定是否正确</strong>，可以增加 <code>try(尝试)</code> 来 <strong>捕获异常</strong></li>
<li>捕获异常最简单的语法格式：</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">try</span><span class="token punctuation">:</span>
    尝试执行的代码
<span class="token keyword">except</span><span class="token punctuation">:</span>
    出现错误的处理
</pre><ul>
<li><code>try</code> <strong>尝试</strong>，下方编写要尝试代码，不确定是否能够正常执行的代码</li>
<li><code>except</code> <strong>如果不是</strong>，下方编写尝试失败的代码</li>
</ul>
<h4 class="mume-header" id="%E7%AE%80%E5%8D%95%E5%BC%82%E5%B8%B8%E6%8D%95%E8%8E%B7%E6%BC%94%E7%BB%83-%E8%A6%81%E6%B1%82%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5%E6%95%B4%E6%95%B0">简单异常捕获演练 —— 要求用户输入整数</h4>

<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token comment"># 提示用户输入一个数字</span>
    num <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请输入数字："</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">except</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"请输入正确的数字"</span><span class="token punctuation">)</span>
</pre><h3 class="mume-header" id="22-%E9%94%99%E8%AF%AF%E7%B1%BB%E5%9E%8B%E6%8D%95%E8%8E%B7">2.2 错误类型捕获</h3>

<ul>
<li>
<p>在程序执行时，可能会遇到 <strong>不同类型的异常</strong>，并且需要 <strong>针对不同类型的异常，做出不同的响应</strong>，这个时候，就需要捕获错误类型了</p>
</li>
<li>
<p>语法如下：</p>
</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token comment"># 尝试执行的代码</span>
    <span class="token keyword">pass</span>
<span class="token keyword">except</span> 错误类型<span class="token number">1</span><span class="token punctuation">:</span>
    <span class="token comment"># 针对错误类型1，对应的代码处理</span>
    <span class="token keyword">pass</span>
<span class="token keyword">except</span> <span class="token punctuation">(</span>错误类型<span class="token number">2</span><span class="token punctuation">,</span> 错误类型<span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 针对错误类型2 和 3，对应的代码处理</span>
    <span class="token keyword">pass</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> result<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"未知错误 %s"</span> <span class="token operator">%</span> result<span class="token punctuation">)</span>
</pre><ul>
<li>当 <code>Python</code> 解释器 <strong>抛出异常</strong> 时，<strong>最后一行错误信息的第一个单词，就是错误类型</strong></li>
</ul>
<h4 class="mume-header" id="%E5%BC%82%E5%B8%B8%E7%B1%BB%E5%9E%8B%E6%8D%95%E8%8E%B7%E6%BC%94%E7%BB%83-%E8%A6%81%E6%B1%82%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5%E6%95%B4%E6%95%B0">异常类型捕获演练 —— 要求用户输入整数</h4>

<p><strong>需求</strong></p>
<ol>
<li>提示用户输入一个整数</li>
<li>使用 <code>8</code> 除以用户输入的整数并且输出</li>
</ol>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">try</span><span class="token punctuation">:</span>
    num <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请输入整数："</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    result <span class="token operator">=</span> <span class="token number">8</span> <span class="token operator">/</span> num
    <span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token keyword">except</span> ValueError<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"请输入正确的整数"</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> ZeroDivisionError<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"除 0 错误"</span><span class="token punctuation">)</span>

</pre><h4 class="mume-header" id="%E6%8D%95%E8%8E%B7%E6%9C%AA%E7%9F%A5%E9%94%99%E8%AF%AF">捕获未知错误</h4>

<ul>
<li>在开发时，<strong>要预判到所有可能出现的错误</strong>，还是有一定难度的</li>
<li>如果希望程序 <strong>无论出现任何错误</strong>，都不会因为 <code>Python</code> 解释器 <strong>抛出异常而被终止</strong>，可以再增加一个 <code>except</code></li>
</ul>
<p>语法如下：</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">except</span> Exception <span class="token keyword">as</span> result<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"未知错误 %s"</span> <span class="token operator">%</span> result<span class="token punctuation">)</span>
</pre><h3 class="mume-header" id="23-%E5%BC%82%E5%B8%B8%E6%8D%95%E8%8E%B7%E5%AE%8C%E6%95%B4%E8%AF%AD%E6%B3%95">2.3 异常捕获完整语法</h3>

<ul>
<li>在实际开发中，为了能够处理复杂的异常情况，完整的异常语法如下：</li>
</ul>
<blockquote>
<p>提示：</p>
<ul>
<li>有关完整语法的应用场景，在后续学习中，<strong>结合实际的案例</strong>会更好理解</li>
<li>现在先对这个语法结构有个印象即可</li>
</ul>
</blockquote>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token comment"># 尝试执行的代码</span>
    <span class="token keyword">pass</span>
<span class="token keyword">except</span> 错误类型<span class="token number">1</span><span class="token punctuation">:</span>
    <span class="token comment"># 针对错误类型1，对应的代码处理</span>
    <span class="token keyword">pass</span>
<span class="token keyword">except</span> 错误类型<span class="token number">2</span><span class="token punctuation">:</span>
    <span class="token comment"># 针对错误类型2，对应的代码处理</span>
    <span class="token keyword">pass</span>
<span class="token keyword">except</span> <span class="token punctuation">(</span>错误类型<span class="token number">3</span><span class="token punctuation">,</span> 错误类型<span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 针对错误类型3 和 4，对应的代码处理</span>
    <span class="token keyword">pass</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> result<span class="token punctuation">:</span>
    <span class="token comment"># 打印错误信息</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token comment"># 没有异常才会执行的代码</span>
    <span class="token keyword">pass</span>
<span class="token keyword">finally</span><span class="token punctuation">:</span>
    <span class="token comment"># 无论是否有异常，都会执行的代码</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"无论是否有异常，都会执行的代码"</span><span class="token punctuation">)</span>
</pre><ul>
<li>
<p><code>else</code> 只有在没有异常时才会执行的代码</p>
</li>
<li>
<p><code>finally</code> 无论是否有异常，都会执行的代码</p>
</li>
<li>
<p>之前一个演练的 <strong>完整捕获异常</strong> 的代码如下：</p>
</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">try</span><span class="token punctuation">:</span>
    num <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请输入整数："</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    result <span class="token operator">=</span> <span class="token number">8</span> <span class="token operator">/</span> num
    <span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token keyword">except</span> ValueError<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"请输入正确的整数"</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> ZeroDivisionError<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"除 0 错误"</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> result<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"未知错误 %s"</span> <span class="token operator">%</span> result<span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"正常执行"</span><span class="token punctuation">)</span>
<span class="token keyword">finally</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"执行完成，但是不保证正确"</span><span class="token punctuation">)</span>

</pre><h2 class="mume-header" id="03-%E5%BC%82%E5%B8%B8%E7%9A%84%E4%BC%A0%E9%80%92">03. 异常的传递</h2>

<ul>
<li><strong>异常的传递</strong> —— 当 <strong>函数/方法</strong> 执行 <strong>出现异常</strong>，会 <strong>将异常传递</strong> 给 函数/方法 的 <strong>调用一方</strong></li>
<li>如果 <strong>传递到主程序</strong>，仍然 <strong>没有异常处理</strong>，程序才会被终止</li>
</ul>
<blockquote>
<p>提示</p>
</blockquote>
<ul>
<li>在开发中，可以在主函数中增加 <strong>异常捕获</strong></li>
<li>而在主函数中调用的其他函数，只要出现异常，都会传递到主函数的 <strong>异常捕获</strong> 中</li>
<li>这样就不需要在代码中，增加大量的 <strong>异常捕获</strong>，能够保证代码的整洁</li>
</ul>
<p><strong>需求</strong></p>
<ol>
<li>定义函数 <code>demo1()</code> <strong>提示用户输入一个整数并且返回</strong></li>
<li>定义函数 <code>demo2()</code> 调用 <code>demo1()</code></li>
<li>在主程序中调用 <code>demo2()</code></li>
</ol>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">def</span> <span class="token function">demo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请输入一个整数："</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">demo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> demo1<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>demo2<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> ValueError<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"请输入正确的整数"</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> result<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"未知错误 %s"</span> <span class="token operator">%</span> result<span class="token punctuation">)</span>

</pre><h2 class="mume-header" id="04-%E6%8A%9B%E5%87%BA-raise-%E5%BC%82%E5%B8%B8">04. 抛出 <code>raise</code> 异常</h2>

<h3 class="mume-header" id="41-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">4.1 应用场景</h3>

<ul>
<li>在开发中，除了 <strong>代码执行出错</strong> <code>Python</code> 解释器会 <strong>抛出</strong> 异常之外</li>
<li>还可以根据 <strong>应用程序</strong> <strong>特有的业务需求</strong> <strong>主动抛出异常</strong></li>
</ul>
<p><strong>示例</strong></p>
<ul>
<li>提示用户 <strong>输入密码</strong>，如果 <strong>长度少于 8</strong>，抛出 <strong>异常</strong></li>
</ul>
<p><img src="media/15016413521006/024_%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8.png" alt="024_&#x81EA;&#x5B9A;&#x4E49;&#x5F02;&#x5E38;-w822"></p>
<p><strong>注意</strong></p>
<ul>
<li>当前函数 <strong>只负责</strong> 提示用户输入密码，如果 <strong>密码长度不正确，需要其他的函数进行额外处理</strong></li>
<li>因此可以 <strong>抛出异常</strong>，由其他需要处理的函数 <strong>捕获异常</strong></li>
</ul>
<h3 class="mume-header" id="42-%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8">4.2 抛出异常</h3>

<ul>
<li><code>Python</code> 中提供了一个 <code>Exception</code> <strong>异常类</strong></li>
<li>在开发时，如果满足 <strong>特定业务需求时</strong>，希望 <strong>抛出异常</strong>，可以：
<ol>
<li><strong>创建</strong> 一个 <code>Exception</code> 的 <strong>对象</strong></li>
<li>使用 <code>raise</code> <strong>关键字</strong> 抛出 <strong>异常对象</strong></li>
</ol>
</li>
</ul>
<p><strong>需求</strong></p>
<ul>
<li>定义 <code>input_password</code> 函数，提示用户输入密码</li>
<li>如果用户输入长度 &lt; 8，抛出异常</li>
<li>如果用户输入长度 &gt;=8，返回输入的密码</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">def</span> <span class="token function">input_password</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token comment"># 1. 提示用户输入密码</span>
    pwd <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请输入密码："</span><span class="token punctuation">)</span>

    <span class="token comment"># 2. 判断密码长度，如果长度 >= 8，返回用户输入的密码</span>
    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>pwd<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">8</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> pwd

    <span class="token comment"># 3. 密码长度不够，需要抛出异常</span>
    <span class="token comment"># 1> 创建异常对象 - 使用异常的错误信息字符串作为参数</span>
    ex <span class="token operator">=</span> Exception<span class="token punctuation">(</span><span class="token string">"密码长度不够"</span><span class="token punctuation">)</span>

    <span class="token comment"># 2> 抛出异常对象</span>
    <span class="token keyword">raise</span> ex


<span class="token keyword">try</span><span class="token punctuation">:</span>
    user_pwd <span class="token operator">=</span> input_password<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>user_pwd<span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> result<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"发现错误：%s"</span> <span class="token operator">%</span> result<span class="token punctuation">)</span>

</pre><h1 class="mume-header" id="%E6%A8%A1%E5%9D%97%E5%92%8C%E5%8C%85">模块和包</h1>

<h2 class="mume-header" id="%E7%9B%AE%E6%A0%87-1">目标</h2>

<ul>
<li>模块</li>
<li>包</li>
<li>发布模块</li>
</ul>
<h2 class="mume-header" id="01-%E6%A8%A1%E5%9D%97">01. 模块</h2>

<h3 class="mume-header" id="11-%E6%A8%A1%E5%9D%97%E7%9A%84%E6%A6%82%E5%BF%B5">1.1 模块的概念</h3>

<blockquote>
<p><strong>模块是 Python 程序架构的一个核心概念</strong></p>
</blockquote>
<ul>
<li>每一个以扩展名 <code>py</code> 结尾的 <code>Python</code> 源代码文件都是一个 <strong>模块</strong></li>
<li><strong>模块名</strong> 同样也是一个 <strong>标识符</strong>，需要符合标识符的命名规则</li>
<li>在模块中定义的 <strong>全局变量</strong> 、<strong>函数</strong>、<strong>类</strong> 都是提供给外界直接使用的 <strong>工具</strong></li>
<li><strong>模块</strong> 就好比是 <strong>工具包</strong>，要想使用这个工具包中的工具，就需要先 <strong>导入</strong> 这个模块</li>
</ul>
<h3 class="mume-header" id="12-%E6%A8%A1%E5%9D%97%E7%9A%84%E4%B8%A4%E7%A7%8D%E5%AF%BC%E5%85%A5%E6%96%B9%E5%BC%8F">1.2 模块的两种导入方式</h3>

<h4 class="mume-header" id="1import-%E5%AF%BC%E5%85%A5">1）import 导入</h4>

<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> 模块名<span class="token number">1</span><span class="token punctuation">,</span> 模块名<span class="token number">2</span> 
</pre><blockquote>
<p>提示：在导入模块时，每个导入应该独占一行</p>
</blockquote>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> 模块名<span class="token number">1</span>
<span class="token keyword">import</span> 模块名<span class="token number">2</span> 
</pre><ul>
<li><strong>导入之后</strong>
<ul>
<li>通过 <code>模块名.</code> 使用 <strong>模块提供的工具</strong> —— <strong>全局变量</strong>、<strong>函数</strong>、<strong>类</strong></li>
</ul>
</li>
</ul>
<h5 class="mume-header" id="%E4%BD%BF%E7%94%A8-as-%E6%8C%87%E5%AE%9A%E6%A8%A1%E5%9D%97%E7%9A%84%E5%88%AB%E5%90%8D">使用 <code>as</code> 指定模块的别名</h5>

<blockquote>
<p><strong>如果模块的名字太长</strong>，可以使用 <code>as</code> 指定模块的名称，以方便在代码中的使用</p>
</blockquote>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> 模块名<span class="token number">1</span> <span class="token keyword">as</span> 模块别名
</pre><blockquote>
<p>注意：<strong>模块别名</strong> 应该符合 <strong>大驼峰命名法</strong></p>
</blockquote>
<h4 class="mume-header" id="2fromimport-%E5%AF%BC%E5%85%A5">2）from...import 导入</h4>

<ul>
<li>如果希望 <strong>从某一个模块</strong> 中，导入 <strong>部分</strong> 工具，就可以使用 <code>from ... import</code> 的方式</li>
<li><code>import 模块名</code> 是 <strong>一次性</strong> 把模块中 <strong>所有工具全部导入</strong>，并且通过 <strong>模块名/别名</strong> 访问</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token comment"># 从 模块 导入 某一个工具</span>
<span class="token keyword">from</span> 模块名<span class="token number">1</span> <span class="token keyword">import</span> 工具名
</pre><ul>
<li>导入之后
<ul>
<li><strong>不需要</strong> 通过 <code>模块名.</code></li>
<li>可以直接使用 <strong>模块提供的工具</strong> —— <strong>全局变量</strong>、<strong>函数</strong>、<strong>类</strong></li>
</ul>
</li>
</ul>
<p><strong>注意</strong></p>
<blockquote>
<p>如果 <strong>两个模块</strong>，存在 <strong>同名的函数</strong>，那么 <strong>后导入模块的函数</strong>，会 <strong>覆盖掉先导入的函数</strong></p>
</blockquote>
<ul>
<li>开发时 <code>import</code> 代码应该统一写在 <strong>代码的顶部</strong>，更容易及时发现冲突</li>
<li>一旦发现冲突，可以使用 <code>as</code> 关键字 <strong>给其中一个工具起一个别名</strong></li>
</ul>
<h5 class="mume-header" id="fromimport-%E7%9F%A5%E9%81%93">from...import *（知道）</h5>

<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token comment"># 从 模块 导入 所有工具</span>
<span class="token keyword">from</span> 模块名<span class="token number">1</span> <span class="token keyword">import</span> <span class="token operator">*</span>
</pre><p><strong>注意</strong></p>
<blockquote>
<p>这种方式不推荐使用，因为函数重名并没有任何的提示，出现问题不好排查</p>
</blockquote>
<h3 class="mume-header" id="13-%E6%A8%A1%E5%9D%97%E7%9A%84%E6%90%9C%E7%B4%A2%E9%A1%BA%E5%BA%8F%E6%89%A9%E5%B1%95">1.3 模块的搜索顺序[扩展]</h3>

<p><code>Python</code> 的解释器在 <strong>导入模块</strong> 时，会：</p>
<ol>
<li>搜索 <strong>当前目录</strong> 指定模块名的文件，<strong>如果有就直接导入</strong></li>
<li>如果没有，再搜索 <strong>系统目录</strong></li>
</ol>
<blockquote>
<p>在开发时，给文件起名，不要和 <strong>系统的模块文件</strong> <strong>重名</strong></p>
</blockquote>
<p><code>Python</code> 中每一个模块都有一个内置属性 <code>__file__</code> 可以 <strong>查看模块</strong> 的 <strong>完整路径</strong></p>
<p><strong>示例</strong></p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> random

<span class="token comment"># 生成一个 0～10 的数字</span>
rand <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>rand<span class="token punctuation">)</span>

</pre><blockquote>
<p>注意：如果当前目录下，存在一个 <code>random.py</code> 的文件，程序就无法正常执行了！</p>
</blockquote>
<ul>
<li>这个时候，<code>Python</code> 的解释器会 <strong>加载当前目录</strong> 下的 <code>random.py</code> 而不会加载 <strong>系统的</strong> <code>random</code> 模块</li>
</ul>
<h3 class="mume-header" id="14-%E5%8E%9F%E5%88%99-%E6%AF%8F%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E9%83%BD%E5%BA%94%E8%AF%A5%E6%98%AF%E5%8F%AF%E4%BB%A5%E8%A2%AB%E5%AF%BC%E5%85%A5%E7%9A%84">1.4 原则 —— 每一个文件都应该是可以被导入的</h3>

<ul>
<li>一个 <strong>独立的 <code>Python</code> 文件</strong> 就是一个 <strong>模块</strong></li>
<li>在导入文件时，文件中 <strong>所有没有任何缩进的代码</strong> 都会被执行一遍！</li>
</ul>
<p><strong>实际开发场景</strong></p>
<ul>
<li>在实际开发中，每一个模块都是独立开发的，大多都有专人负责</li>
<li><strong>开发人员</strong> 通常会在 <strong>模块下方</strong> <strong>增加一些测试代码</strong>
<ul>
<li>仅在模块内使用，而被导入到其他文件中不需要执行</li>
</ul>
</li>
</ul>
<h4 class="mume-header" id="__name__-%E5%B1%9E%E6%80%A7"><code>__name__</code> 属性</h4>

<blockquote>
<ul>
<li><code>__name__</code> 属性可以做到，测试模块的代码 <strong>只在测试情况下被运行</strong>，而在 <strong>被导入时不会被执行</strong>！</li>
</ul>
</blockquote>
<ul>
<li><code>__name__</code> 是 <code>Python</code> 的一个内置属性，记录着一个 <strong>字符串</strong></li>
<li>如果 <strong>是被其他文件导入的</strong>，<code>__name__</code> 就是 <strong>模块名</strong></li>
<li>如果 <strong>是当前执行的程序</strong> <code>__name__</code> 是 <strong><code>__main__</code></strong></li>
</ul>
<p><strong>在很多 <code>Python</code> 文件中都会看到以下格式的代码</strong>：</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token comment"># 导入模块</span>
<span class="token comment"># 定义全局变量</span>
<span class="token comment"># 定义类</span>
<span class="token comment"># 定义函数</span>

<span class="token comment"># 在代码的最下方</span>
<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># ...</span>
    <span class="token keyword">pass</span>

<span class="token comment"># 根据 __name__ 判断是否执行下方代码</span>
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>

</pre><h2 class="mume-header" id="02-%E5%8C%85package">02. 包（Package）</h2>

<h3 class="mume-header" id="%E6%A6%82%E5%BF%B5">概念</h3>

<ul>
<li><strong>包</strong> 是一个 <strong>包含多个模块</strong> 的 <strong>特殊目录</strong></li>
<li>目录下有一个 <strong>特殊的文件</strong> <code>__init__.py</code></li>
<li>包名的 <strong>命名方式</strong> 和变量名一致，<strong>小写字母</strong> + <code>_</code></li>
</ul>
<p><strong>好处</strong></p>
<ul>
<li>使用 <code>import 包名</code> 可以一次性导入 <strong>包</strong> 中 <strong>所有的模块</strong></li>
</ul>
<h3 class="mume-header" id="%E6%A1%88%E4%BE%8B%E6%BC%94%E7%BB%83">案例演练</h3>

<ol>
<li>新建一个 <code>hm_message</code> 的 <strong>包</strong></li>
<li>在目录下，新建两个文件 <code>send_message</code> 和 <code>receive_message</code></li>
<li>在 <code>send_message</code> 文件中定义一个 <code>send</code> 函数</li>
<li>在 <code>receive_message</code> 文件中定义一个 <code>receive</code> 函数</li>
<li>在外部直接导入 <code>hm_message</code> 的包</li>
</ol>
<h3 class="mume-header" id="__init__py"><code>__init__.py</code></h3>

<ul>
<li>要在外界使用 <strong>包</strong> 中的模块，需要在 <code>__init__.py</code> 中指定 <strong>对外界提供的模块列表</strong></li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token comment"># 从 当前目录 导入 模块列表</span>
<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> send_message
<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> receive_message
</pre><h2 class="mume-header" id="03-%E5%8F%91%E5%B8%83%E6%A8%A1%E5%9D%97%E7%9F%A5%E9%81%93">03. 发布模块（知道）</h2>

<ul>
<li>如果希望自己开发的模块，<strong>分享</strong> 给其他人，可以按照以下步骤操作</li>
</ul>
<h3 class="mume-header" id="31-%E5%88%B6%E4%BD%9C%E5%8F%91%E5%B8%83%E5%8E%8B%E7%BC%A9%E5%8C%85%E6%AD%A5%E9%AA%A4">3.1 制作发布压缩包步骤</h3>

<h4 class="mume-header" id="1-%E5%88%9B%E5%BB%BA-setuppy">1) 创建 <a href="http://setup.py">setup.py</a></h4>

<ul>
<li><code>setup.py</code> 的文件</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">from</span> distutils<span class="token punctuation">.</span>core <span class="token keyword">import</span> setup

setup<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"hm_message"</span><span class="token punctuation">,</span>  <span class="token comment"># 包名</span>
      version<span class="token operator">=</span><span class="token string">"1.0"</span><span class="token punctuation">,</span>  <span class="token comment"># 版本</span>
      description<span class="token operator">=</span><span class="token string">"itheima's 发送和接收消息模块"</span><span class="token punctuation">,</span>  <span class="token comment"># 描述信息</span>
      long_description<span class="token operator">=</span><span class="token string">"完整的发送和接收消息模块"</span><span class="token punctuation">,</span>  <span class="token comment"># 完整描述信息</span>
      author<span class="token operator">=</span><span class="token string">"itheima"</span><span class="token punctuation">,</span>  <span class="token comment"># 作者</span>
      author_email<span class="token operator">=</span><span class="token string">"itheima@itheima.com"</span><span class="token punctuation">,</span>  <span class="token comment"># 作者邮箱</span>
      url<span class="token operator">=</span><span class="token string">"www.itheima.com"</span><span class="token punctuation">,</span>  <span class="token comment"># 主页</span>
      py_modules<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"hm_message.send_message"</span><span class="token punctuation">,</span>
                  <span class="token string">"hm_message.receive_message"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

</pre><p>有关字典参数的详细信息，可以参阅官方网站：</p>
<p><a href="https://docs.python.org/2/distutils/apiref.html">https://docs.python.org/2/distutils/apiref.html</a></p>
<h4 class="mume-header" id="2-%E6%9E%84%E5%BB%BA%E6%A8%A1%E5%9D%97">2) 构建模块</h4>

<pre data-role="codeBlock" data-info="bash" class="language-bash">$ python3 setup.py build
</pre><h4 class="mume-header" id="3-%E7%94%9F%E6%88%90%E5%8F%91%E5%B8%83%E5%8E%8B%E7%BC%A9%E5%8C%85">3) 生成发布压缩包</h4>

<pre data-role="codeBlock" data-info="bash" class="language-bash">$ python3 setup.py sdist
</pre><blockquote>
<p>注意：要制作哪个版本的模块，就使用哪个版本的解释器执行！</p>
</blockquote>
<h3 class="mume-header" id="32-%E5%AE%89%E8%A3%85%E6%A8%A1%E5%9D%97">3.2 安装模块</h3>

<pre data-role="codeBlock" data-info="bash" class="language-bash">$ <span class="token function">tar</span> -zxvf hm_message-1.0.tar.gz 

$ <span class="token function">sudo</span> python3 setup.py <span class="token function">install</span>
</pre><p><strong>卸载模块</strong></p>
<p>直接从安装目录下，把安装模块的 <strong>目录</strong> 删除就可以</p>
<pre data-role="codeBlock" data-info="python" class="language-python">$ cd <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>lib<span class="token operator">/</span>python3<span class="token punctuation">.</span><span class="token number">5</span><span class="token operator">/</span>dist<span class="token operator">-</span>packages<span class="token operator">/</span>
$ sudo rm <span class="token operator">-</span>r hm_message<span class="token operator">*</span>
</pre><h3 class="mume-header" id="33-pip-%E5%AE%89%E8%A3%85%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A8%A1%E5%9D%97">3.3 <code>pip</code> 安装第三方模块</h3>

<ul>
<li><strong>第三方模块</strong> 通常是指由 <strong>知名的第三方团队</strong> <strong>开发的</strong> 并且被 <strong>程序员广泛使用</strong> 的 <code>Python</code> 包 / 模块
<ul>
<li>例如 <code>pygame</code> 就是一套非常成熟的 <strong>游戏开发模块</strong></li>
</ul>
</li>
<li><code>pip</code> 是一个现代的，通用的 <code>Python</code> 包管理工具</li>
<li>提供了对 <code>Python</code> 包的查找、下载、安装、卸载等功能</li>
</ul>
<p>安装和卸载命令如下：</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash"><span class="token comment"># 将模块安装到 Python 2.x 环境</span>
$ <span class="token function">sudo</span> pip <span class="token function">install</span> pygame
$ <span class="token function">sudo</span> pip uninstall pygame

<span class="token comment"># 将模块安装到 Python 3.x 环境</span>
$ <span class="token function">sudo</span> pip3 <span class="token function">install</span> pygame
$ <span class="token function">sudo</span> pip3 uninstall pygame
</pre><h4 class="mume-header" id="%E5%9C%A8-mac-%E4%B8%8B%E5%AE%89%E8%A3%85-ipython">在 <code>Mac</code> 下安装 <code>iPython</code></h4>

<pre data-role="codeBlock" data-info="bash" class="language-bash">$ <span class="token function">sudo</span> pip <span class="token function">install</span> ipython
</pre><h4 class="mume-header" id="%E5%9C%A8-linux-%E4%B8%8B%E5%AE%89%E8%A3%85-ipython">在 <code>Linux</code> 下安装 <code>iPython</code></h4>

<pre data-role="codeBlock" data-info="bash" class="language-bash">$ <span class="token function">sudo</span> apt <span class="token function">install</span> ipython
$ <span class="token function">sudo</span> apt <span class="token function">install</span> ipython3
</pre><h1 class="mume-header" id="%E6%96%87%E4%BB%B6">文件</h1>

<h2 class="mume-header" id="%E7%9B%AE%E6%A0%87-2">目标</h2>

<ul>
<li>文件的概念</li>
<li>文件的基本操作</li>
<li>文件/文件夹的常用操作</li>
<li>文本文件的编码方式</li>
</ul>
<h2 class="mume-header" id="01-%E6%96%87%E4%BB%B6%E7%9A%84%E6%A6%82%E5%BF%B5">01. 文件的概念</h2>

<h3 class="mume-header" id="11-%E6%96%87%E4%BB%B6%E7%9A%84%E6%A6%82%E5%BF%B5%E5%92%8C%E4%BD%9C%E7%94%A8">1.1 文件的概念和作用</h3>

<ul>
<li>计算机的 <strong>文件</strong>，就是存储在某种 <strong>长期储存设备</strong> 上的一段 <strong>数据</strong></li>
<li>长期存储设备包括：硬盘、U 盘、移动硬盘、光盘...</li>
</ul>
<p><strong>文件的作用</strong></p>
<p>将数据长期保存下来，在需要的时候使用</p>
<table>
<thead>
<tr>
<th style="text-align:center">CPU</th>
<th style="text-align:center">内存</th>
<th style="text-align:center">硬盘</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="media/15019810951755/CPU.jpg" alt="CPU-w200"></td>
<td style="text-align:center"><img src="media/15019810951755/%E5%86%85%E5%AD%98%E6%9D%A1.png" alt="&#x5185;&#x5B58;&#x6761;-w200"></td>
<td style="text-align:center"><img src="media/15019810951755/%E7%A1%AC%E7%9B%98.jpg" alt="&#x786C;&#x76D8;-w200"></td>
</tr>
</tbody>
</table>
<h3 class="mume-header" id="12-%E6%96%87%E4%BB%B6%E7%9A%84%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8F">1.2 文件的存储方式</h3>

<ul>
<li>在计算机中，文件是以 <strong>二进制</strong> 的方式保存在磁盘上的</li>
</ul>
<h4 class="mume-header" id="%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6%E5%92%8C%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6">文本文件和二进制文件</h4>

<ul>
<li>
<p>文本文件</p>
<ul>
<li>可以使用 <strong>文本编辑软件</strong> 查看</li>
<li>本质上还是二进制文件</li>
<li>例如：python 的源程序</li>
</ul>
</li>
<li>
<p>二进制文件</p>
<ul>
<li>保存的内容 不是给人直接阅读的，而是 <strong>提供给其他软件使用的</strong></li>
<li>例如：图片文件、音频文件、视频文件等等</li>
<li>二进制文件不能使用 <strong>文本编辑软件</strong> 查看</li>
</ul>
</li>
</ul>
<h2 class="mume-header" id="02-%E6%96%87%E4%BB%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C">02. 文件的基本操作</h2>

<h3 class="mume-header" id="21-%E6%93%8D%E4%BD%9C%E6%96%87%E4%BB%B6%E7%9A%84%E5%A5%97%E8%B7%AF">2.1 操作文件的套路</h3>

<p>在 <strong>计算机</strong> 中要操作文件的套路非常固定，一共包含<strong>三个步骤</strong>：</p>
<ol>
<li>打开文件</li>
<li>读、写文件
<ul>
<li><strong>读</strong> 将文件内容读入内存</li>
<li><strong>写</strong> 将内存内容写入文件</li>
</ul>
</li>
<li>关闭文件</li>
</ol>
<h3 class="mume-header" id="22-%E6%93%8D%E4%BD%9C%E6%96%87%E4%BB%B6%E7%9A%84%E5%87%BD%E6%95%B0%E6%96%B9%E6%B3%95">2.2 操作文件的函数/方法</h3>

<ul>
<li>在 <code>Python</code> 中要操作文件需要记住 1 个函数和 3 个方法</li>
</ul>
<table>
<thead>
<tr>
<th>序号</th>
<th>函数/方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>open</td>
<td>打开文件，并且返回文件操作对象</td>
</tr>
<tr>
<td>02</td>
<td>read</td>
<td>将文件内容读取到内存</td>
</tr>
<tr>
<td>03</td>
<td>write</td>
<td>将指定内容写入文件</td>
</tr>
<tr>
<td>04</td>
<td>close</td>
<td>关闭文件</td>
</tr>
</tbody>
</table>
<ul>
<li><code>open</code> 函数负责打开文件，并且返回文件对象</li>
<li><code>read</code>/<code>write</code>/<code>close</code> 三个方法都需要通过 <strong>文件对象</strong> 来调用</li>
</ul>
<h3 class="mume-header" id="23-read-%E6%96%B9%E6%B3%95-%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6">2.3 read 方法 —— 读取文件</h3>

<ul>
<li><code>open</code> 函数的第一个参数是要打开的文件名（文件名区分大小写）
<ul>
<li>如果文件 <strong>存在</strong>，返回 <strong>文件操作对象</strong></li>
<li>如果文件 <strong>不存在</strong>，会 <strong>抛出异常</strong></li>
</ul>
</li>
<li><code>read</code> 方法可以一次性 <strong>读入</strong> 并 <strong>返回</strong> 文件的 <strong>所有内容</strong></li>
<li><code>close</code> 方法负责 <strong>关闭文件</strong>
<ul>
<li>如果 <strong>忘记关闭文件</strong>，<strong>会造成系统资源消耗，而且会影响到后续对文件的访问</strong></li>
</ul>
</li>
<li><strong>注意</strong>：<code>read</code> 方法执行后，会把 <strong>文件指针</strong> 移动到 <strong>文件的末尾</strong></li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token comment"># 1. 打开 - 文件名需要注意大小写</span>
<span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"README"</span><span class="token punctuation">)</span>

<span class="token comment"># 2. 读取</span>
text <span class="token operator">=</span> <span class="token builtin">file</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>

<span class="token comment"># 3. 关闭</span>
<span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</pre><p><strong>提示</strong></p>
<ul>
<li>在开发中，通常会先编写 <strong>打开</strong> 和 <strong>关闭</strong> 的代码，再编写中间针对文件的 <strong>读/写</strong> 操作！</li>
</ul>
<h4 class="mume-header" id="%E6%96%87%E4%BB%B6%E6%8C%87%E9%92%88%E7%9F%A5%E9%81%93">文件指针（知道）</h4>

<ul>
<li><strong>文件指针</strong> 标记 <strong>从哪个位置开始读取数据</strong></li>
<li><strong>第一次打开</strong> 文件时，通常 <strong>文件指针会指向文件的开始位置</strong></li>
<li>当执行了 <code>read</code> 方法后，<strong>文件指针</strong> 会移动到 <strong>读取内容的末尾</strong>
<ul>
<li>默认情况下会移动到 <strong>文件末尾</strong></li>
</ul>
</li>
</ul>
<p><strong>思考</strong></p>
<ul>
<li>如果执行了一次 <code>read</code> 方法，读取了所有内容，那么再次调用 <code>read</code> 方法，还能够获得到内容吗？</li>
</ul>
<p><strong>答案</strong></p>
<ul>
<li>不能</li>
<li>第一次读取之后，文件指针移动到了文件末尾，再次调用不会读取到任何的内容</li>
</ul>
<h3 class="mume-header" id="24-%E6%89%93%E5%BC%80%E6%96%87%E4%BB%B6%E7%9A%84%E6%96%B9%E5%BC%8F">2.4 打开文件的方式</h3>

<ul>
<li><code>open</code> 函数默认以 <strong>只读方式</strong> 打开文件，并且返回文件对象</li>
</ul>
<p>语法如下：</p>
<pre data-role="codeBlock" data-info="python" class="language-python">f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"文件名"</span><span class="token punctuation">,</span> <span class="token string">"访问方式"</span><span class="token punctuation">)</span>
</pre><table>
<thead>
<tr>
<th style="text-align:center">访问方式</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">r</td>
<td>以<strong>只读</strong>方式打开文件。文件的指针将会放在文件的开头，这是<strong>默认模式</strong>。如果文件不存在，抛出异常</td>
</tr>
<tr>
<td style="text-align:center">w</td>
<td>以<strong>只写</strong>方式打开文件。如果文件存在会被覆盖。如果文件不存在，创建新文件</td>
</tr>
<tr>
<td style="text-align:center">a</td>
<td>以<strong>追加</strong>方式打开文件。如果该文件已存在，文件指针将会放在文件的结尾。如果文件不存在，创建新文件进行写入</td>
</tr>
<tr>
<td style="text-align:center">r+</td>
<td>以<strong>读写</strong>方式打开文件。文件的指针将会放在文件的开头。如果文件不存在，抛出异常</td>
</tr>
<tr>
<td style="text-align:center">w+</td>
<td>以<strong>读写</strong>方式打开文件。如果文件存在会被覆盖。如果文件不存在，创建新文件</td>
</tr>
<tr>
<td style="text-align:center">a+</td>
<td>以<strong>读写</strong>方式打开文件。如果该文件已存在，文件指针将会放在文件的结尾。如果文件不存在，创建新文件进行写入</td>
</tr>
</tbody>
</table>
<p><strong>提示</strong></p>
<ul>
<li>频繁的移动文件指针，<strong>会影响文件的读写效率</strong>，开发中更多的时候会以 <strong>只读</strong>、<strong>只写</strong> 的方式来操作文件</li>
</ul>
<p><strong>写入文件示例</strong></p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token comment"># 打开文件</span>
f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"README"</span><span class="token punctuation">,</span> <span class="token string">"w"</span><span class="token punctuation">)</span>

f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">"hello python！\n"</span><span class="token punctuation">)</span>
f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">"今天天气真好"</span><span class="token punctuation">)</span>

<span class="token comment"># 关闭文件</span>
f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

</pre><h3 class="mume-header" id="25-%E6%8C%89%E8%A1%8C%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9">2.5 按行读取文件内容</h3>

<ul>
<li><code>read</code> 方法默认会把文件的 <strong>所有内容</strong> <strong>一次性读取到内存</strong></li>
<li>如果文件太大，对内存的占用会非常严重</li>
</ul>
<h4 class="mume-header" id="readline-%E6%96%B9%E6%B3%95"><code>readline</code> 方法</h4>

<ul>
<li><code>readline</code> 方法可以一次读取一行内容</li>
<li>方法执行后，会把 <strong>文件指针</strong> 移动到下一行，准备再次读取</li>
</ul>
<p><strong>读取大文件的正确姿势</strong></p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token comment"># 打开文件</span>
<span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"README"</span><span class="token punctuation">)</span>

<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token comment"># 读取一行内容</span>
    text <span class="token operator">=</span> <span class="token builtin">file</span><span class="token punctuation">.</span>readline<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># 判断是否读到内容</span>
    <span class="token keyword">if</span> <span class="token operator">not</span> text<span class="token punctuation">:</span>
        <span class="token keyword">break</span>

    <span class="token comment"># 每读取一行的末尾已经有了一个 `\n`</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">)</span>

<span class="token comment"># 关闭文件</span>
<span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

</pre><h3 class="mume-header" id="26-%E6%96%87%E4%BB%B6%E8%AF%BB%E5%86%99%E6%A1%88%E4%BE%8B-%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6">2.6 文件读写案例 —— 复制文件</h3>

<p><strong>目标</strong></p>
<p>用代码的方式，来实现文件复制过程</p>
<p><img src="media/15019810951755/025_%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6.png" alt="025_&#x590D;&#x5236;&#x6587;&#x4EF6;-w441"></p>
<h4 class="mume-header" id="%E5%B0%8F%E6%96%87%E4%BB%B6%E5%A4%8D%E5%88%B6">小文件复制</h4>

<ul>
<li>打开一个已有文件，读取完整内容，并写入到另外一个文件</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token comment"># 1. 打开文件</span>
file_read <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"README"</span><span class="token punctuation">)</span>
file_write <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"README[复件]"</span><span class="token punctuation">,</span> <span class="token string">"w"</span><span class="token punctuation">)</span>

<span class="token comment"># 2. 读取并写入文件</span>
text <span class="token operator">=</span> file_read<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
file_write<span class="token punctuation">.</span>write<span class="token punctuation">(</span>text<span class="token punctuation">)</span>

<span class="token comment"># 3. 关闭文件</span>
file_read<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
file_write<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

</pre><h4 class="mume-header" id="%E5%A4%A7%E6%96%87%E4%BB%B6%E5%A4%8D%E5%88%B6">大文件复制</h4>

<ul>
<li>打开一个已有文件，逐行读取内容，并顺序写入到另外一个文件</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token comment"># 1. 打开文件</span>
file_read <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"README"</span><span class="token punctuation">)</span>
file_write <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"README[复件]"</span><span class="token punctuation">,</span> <span class="token string">"w"</span><span class="token punctuation">)</span>

<span class="token comment"># 2. 读取并写入文件</span>
<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token comment"># 每次读取一行</span>
    text <span class="token operator">=</span> file_read<span class="token punctuation">.</span>readline<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># 判断是否读取到内容</span>
    <span class="token keyword">if</span> <span class="token operator">not</span> text<span class="token punctuation">:</span>
        <span class="token keyword">break</span>

    file_write<span class="token punctuation">.</span>write<span class="token punctuation">(</span>text<span class="token punctuation">)</span>

<span class="token comment"># 3. 关闭文件</span>
file_read<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
file_write<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

</pre><h2 class="mume-header" id="03-%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%E7%9A%84%E5%B8%B8%E7%94%A8%E7%AE%A1%E7%90%86%E6%93%8D%E4%BD%9C">03. 文件/目录的常用管理操作</h2>

<ul>
<li>在 <strong>终端</strong> / <strong>文件浏览器</strong>、 中可以执行常规的 <strong>文件</strong> / <strong>目录</strong> 管理操作，例如：
<ul>
<li>创建、重命名、删除、改变路径、查看目录内容、……</li>
</ul>
</li>
<li>在 <code>Python</code> 中，如果希望通过程序实现上述功能，需要导入 <code>os</code> 模块</li>
</ul>
<h3 class="mume-header" id="%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C">文件操作</h3>

<table>
<thead>
<tr>
<th>序号</th>
<th>方法名</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>rename</td>
<td>重命名文件</td>
<td><code>os.rename(源文件名, 目标文件名)</code></td>
</tr>
<tr>
<td>02</td>
<td>remove</td>
<td>删除文件</td>
<td><code>os.remove(文件名)</code></td>
</tr>
</tbody>
</table>
<h3 class="mume-header" id="%E7%9B%AE%E5%BD%95%E6%93%8D%E4%BD%9C">目录操作</h3>

<table>
<thead>
<tr>
<th>序号</th>
<th>方法名</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>listdir</td>
<td>目录列表</td>
<td><code>os.listdir(目录名)</code></td>
</tr>
<tr>
<td>02</td>
<td>mkdir</td>
<td>创建目录</td>
<td><code>os.mkdir(目录名)</code></td>
</tr>
<tr>
<td>03</td>
<td>rmdir</td>
<td>删除目录</td>
<td><code>os.rmdir(目录名)</code></td>
</tr>
<tr>
<td>04</td>
<td>getcwd</td>
<td>获取当前目录</td>
<td><code>os.getcwd()</code></td>
</tr>
<tr>
<td>05</td>
<td>chdir</td>
<td>修改工作目录</td>
<td><code>os.chdir(目标目录)</code></td>
</tr>
<tr>
<td>06</td>
<td>path.isdir</td>
<td>判断是否是文件</td>
<td><code>os.path.isdir(文件路径)</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p>提示：文件或者目录操作都支持 <strong>相对路径</strong> 和 <strong>绝对路径</strong></p>
</blockquote>
<h2 class="mume-header" id="04-%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6%E7%9A%84%E7%BC%96%E7%A0%81%E6%A0%BC%E5%BC%8F%E7%A7%91%E6%99%AE">04. 文本文件的编码格式（科普）</h2>

<ul>
<li>文本文件存储的内容是基于 <strong>字符编码</strong> 的文件，常见的编码有 <code>ASCII</code> 编码，<code>UNICODE</code> 编码等</li>
</ul>
<blockquote>
<p>Python 2.x 默认使用 <code>ASCII</code> 编码格式<br>
Python 3.x 默认使用 <code>UTF-8</code> 编码格式</p>
</blockquote>
<h3 class="mume-header" id="41-ascii-%E7%BC%96%E7%A0%81%E5%92%8C-unicode-%E7%BC%96%E7%A0%81">4.1 ASCII 编码和 UNICODE 编码</h3>

<h4 class="mume-header" id="ascii-%E7%BC%96%E7%A0%81"><code>ASCII</code> 编码</h4>

<ul>
<li>计算机中只有 <code>256</code> 个 <code>ASCII</code> 字符</li>
<li>一个 <code>ASCII</code> 在内存中占用 <strong>1 个字节</strong> 的空间
<ul>
<li><code>8</code> 个 <code>0/1</code> 的排列组合方式一共有 <code>256</code> 种，也就是 <code>2 ** 8</code></li>
</ul>
</li>
</ul>
<p><img src="media/15019810951755/001_ASCII%E7%BC%96%E7%A0%81%E8%A1%A81.jpg" alt="001_ASCII&#x7F16;&#x7801;&#x8868;1"></p>
<h4 class="mume-header" id="utf-8-%E7%BC%96%E7%A0%81%E6%A0%BC%E5%BC%8F"><code>UTF-8</code> 编码格式</h4>

<ul>
<li>计算机中使用 <strong>1~6 个字节</strong> 来表示一个 <code>UTF-8</code> 字符，涵盖了 <strong>地球上几乎所有地区的文字</strong></li>
<li>大多数汉字会使用 <strong>3 个字节</strong> 表示</li>
<li><code>UTF-8</code> 是 <code>UNICODE</code> 编码的一种编码格式</li>
</ul>
<h3 class="mume-header" id="42-ptyhon-2x-%E4%B8%AD%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E4%B8%AD%E6%96%87">4.2 Ptyhon 2.x 中如何使用中文</h3>

<blockquote>
<p>Python 2.x 默认使用 <code>ASCII</code> 编码格式<br>
Python 3.x 默认使用 <code>UTF-8</code> 编码格式</p>
</blockquote>
<ul>
<li>在 Python 2.x 文件的 <strong>第一行</strong> 增加以下代码，解释器会以 <code>utf-8</code> 编码来处理 python 文件</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token comment"># *-* coding:utf8 *-*</span>
</pre><blockquote>
<p>这方式是官方推荐使用的！</p>
</blockquote>
<ul>
<li>也可以使用</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token comment"># coding=utf8</span>
</pre><h4 class="mume-header" id="unicode-%E5%AD%97%E7%AC%A6%E4%B8%B2">unicode 字符串</h4>

<ul>
<li>在 <code>Python 2.x</code> 中，即使指定了文件使用 <code>UTF-8</code> 的编码格式，但是在遍历字符串时，仍然会 <strong>以字节为单位遍历</strong> 字符串</li>
<li>要能够 <strong>正确的遍历字符串</strong>，在定义字符串时，需要 <strong>在字符串的引号前</strong>，增加一个小写字母 <code>u</code>，告诉解释器这是一个 <code>unicode</code> 字符串（使用 <code>UTF-8</code> 编码格式的字符串）</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token comment"># *-* coding:utf8 *-*</span>

<span class="token comment"># 在字符串前，增加一个 `u` 表示这个字符串是一个 utf8 字符串</span>
hello_str <span class="token operator">=</span> u<span class="token string">"你好世界"</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>hello_str<span class="token punctuation">)</span>

<span class="token keyword">for</span> c <span class="token keyword">in</span> hello_str<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>

</pre><h1 class="mume-header" id="eval-%E5%87%BD%E6%95%B0"><code>eval</code> 函数</h1>

<p><code>eval()</code> 函数十分强大 —— <strong>将字符串</strong> 当成 <strong>有效的表达式</strong> 来求值 并 <strong>返回计算结果</strong></p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token comment"># 基本的数学计算</span>
In <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">eval</span><span class="token punctuation">(</span><span class="token string">"1 + 1"</span><span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">2</span>

<span class="token comment"># 字符串重复</span>
In <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">eval</span><span class="token punctuation">(</span><span class="token string">"'*' * 10"</span><span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token string">'**********'</span>

<span class="token comment"># 将字符串转换成列表</span>
In <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token builtin">eval</span><span class="token punctuation">(</span><span class="token string">"[1, 2, 3, 4, 5]"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">list</span>

<span class="token comment"># 将字符串转换成字典</span>
In <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token builtin">eval</span><span class="token punctuation">(</span><span class="token string">"{'name': 'xiaoming', 'age': 18}"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Out<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">dict</span>
</pre><h2 class="mume-header" id="%E6%A1%88%E4%BE%8B-%E8%AE%A1%E7%AE%97%E5%99%A8">案例 - 计算器</h2>

<p><strong>需求</strong></p>
<ol>
<li>提示用户输入一个 <strong>加减乘除混合运算</strong></li>
<li>返回计算结果</li>
</ol>
<pre data-role="codeBlock" data-info="python" class="language-python">input_str <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请输入一个算术题："</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">eval</span><span class="token punctuation">(</span>input_str<span class="token punctuation">)</span><span class="token punctuation">)</span>

</pre><h2 class="mume-header" id="%E4%B8%8D%E8%A6%81%E6%BB%A5%E7%94%A8-eval">不要滥用 <code>eval</code></h2>

<blockquote>
<p>在开发时千万不要使用 <code>eval</code> 直接转换 <code>input</code> 的结果</p>
</blockquote>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token builtin">__import__</span><span class="token punctuation">(</span><span class="token string">'os'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token string">'ls'</span><span class="token punctuation">)</span>
</pre><ul>
<li>等价代码</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> os

os<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token string">"终端命令"</span><span class="token punctuation">)</span>
</pre><ul>
<li>执行成功，返回 0</li>
<li>执行失败，返回错误信息</li>
</ul>

      </div>
      
      
    </body>
    
    
    
    
    
    
    
  </html>